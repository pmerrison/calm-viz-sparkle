{
  "$schema": "https://calm.finos.org/release/1.0/meta/calm.json",
  "nodes": [
    {
      "unique-id": "mcp-client",
      "name": "Claude",
      "description": "MCP Client for querying for reports",
      "node-type": "mcp-client"
    },
    {
      "unique-id": "mcp-server",
      "name": "Reports MCP Server",
      "description": "MCP Server that presents tools for reviewing operational reports for the week",
      "node-type": "service",
      "interfaces": [
        {
          "unique-id": "mcp-server-image",
          "image": "jpgough/mcp-server"
        },
        {
          "unique-id": "mcp-server-port",
          "port": 8080
        }
      ]
    },
    {
      "unique-id": "reports-api",
      "name": "Reports API",
      "description": "API for accessing operational reports raised by the team",
      "node-type": "service",
      "interfaces": [
        {
          "unique-id": "reports-api-image",
          "image": "jpgough/details-jvm"
        },
        {
          "unique-id": "reports-api-port",
          "port": 8080
        }
      ]
    },
    {
      "unique-id": "secret-api",
      "name": "Secret API",
      "description": "Deployed API that should not be available to the MCP Server",
      "node-type": "service",
      "interfaces": [
        {
          "unique-id": "secret-api-image",
          "image": "jpgough/internal-api"
        },
        {
          "unique-id": "secret-api-port",
          "port": 8080
        }
      ],
      "controls": {
        "security": {
          "description": "Lock down an individual POD workload",
          "requirements": [
            {
              "requirement-url": "https://calm.finos.org/workshop/controls/micro-segmentation.requirement.json",
              "config-url": "https://calm.finos.org/workshop/controls/micro-segmentation.config.json"
            }
          ]
        }
      }
    },
    {
      "unique-id": "k8s-cluster",
      "name": "Kubernetes Cluster",
      "description": "Kubernetes Cluster with network policy rules enabled",
      "node-type": "system"
    }
  ],
  "relationships": [
    {
      "unique-id": "mcp-client-mcp-server",
      "description": "Interactions with MCP client and the MCP server",
      "protocol": "HTTPS",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "mcp-client"
          },
          "destination": {
            "node": "mcp-server"
          }
        }
      }
    },
    {
      "unique-id": "mcp-server-reports-api",
      "description": "Requests report data from the API on behalf of the tool",
      "protocol": "mTLS",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "mcp-server"
          },
          "destination": {
            "node": "reports-api"
          }
        }
      }
    },
    {
      "unique-id": "deployed-in-k8s-cluster",
      "description": "Components deployed on the k8s cluster",
      "relationship-type": {
        "deployed-in": {
          "container": "k8s-cluster",
          "nodes": [
            "mcp-server",
            "reports-api",
            "secret-api"
          ]
        }
      }
    }
  ],
  "metadata": [
    {
      "kubernetes": {
        "namespace": "conference"
      }
    }
  ]
}